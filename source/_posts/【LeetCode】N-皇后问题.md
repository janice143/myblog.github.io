---
title: ã€LeetCodeã€‘N çš‡åŽé—®é¢˜
date: 2022-03-18 19:10:47
tags: JavaScript
categories: LeetCode
---

## é—®é¢˜æè¿°

N çš‡åŽé—®é¢˜æ˜¯æŒ‡åœ¨ n \* n çš„æ£‹ç›˜ä¸Šè¦æ‘† n ä¸ªçš‡åŽã€‚

è¦æ±‚ï¼šä»»ä½•ä¸¤ä¸ªçš‡åŽä¸åŒè¡Œï¼Œä¸åŒåˆ—ä¹Ÿä¸åœ¨åŒä¸€æ¡æ–œçº¿ä¸Šï¼Œæ±‚ç»™ä¸€ä¸ªæ•´æ•° n ï¼Œè¿”å›ž n çš‡åŽçš„æ‘†æ³•æ•°ã€‚

#### ä¾‹å¦‚

```markdown
è¾“å…¥ï¼š8
è¿”å›žå€¼ï¼š92

è¾“å…¥ï¼š4
è¿”å›žå€¼ï¼š2
```

## é¢˜è§£æ€è·¯

çœ‹æ‡‚æ­¤é¢˜è§£ä¹‹å‰ï¼Œéœ€è¦ä¼šåš [ã€BM55 æ²¡æœ‰é‡å¤é¡¹æ•°å­—çš„å…¨æŽ’åˆ—ã€‘](https://www.nowcoder.com/practice/4bcf3081067a4d028f95acee3ddcd2b1?tpId=295&tqId=701&ru=/exam/oj&qru=/ta/format-top101/question-ranking&sourceUrl=%2Fexam%2Foj)ã€‚

å¦‚æžœ BM55 å·²ç»ä¼šåšäº†ï¼Œä¸‹é¢å¼€å§‹çœ‹æœ¬é¢˜è§£ã€‚

#### ðŸ‘‡ðŸ‘‡ðŸ‘‡

#### å¤§æ¦‚æ€è·¯

1. n ä¸ªçš‡åŽåˆ†åˆ«åœ¨ 1ï¼Œ2,3...n è¡Œçš„ä¸åŒåˆ—å¤„ï¼Œåˆ—çš„ä¸‹æ ‡ç”¨æ•°ç»„`arr`è¡¨ç¤º
2. è¦ç¡®å®šçš‡åŽçš„ä½ç½®ï¼Œå…¶å®žå°±æ˜¯ç¡®å®šåˆ—çš„ä½ç½®ï¼Œå› ä¸ºè¡Œå·²ç»å›ºå®šäº†
3. è¿›ä¸€æ­¥è®²ï¼Œä¹Ÿå°±æ˜¯å¦‚ä½•æ‘†æ”¾ æ•°ç»„`arr`[0,1,2,3,...,n-1]
4. å¦‚æžœæ²¡æœ‰ã€ä¸åœ¨åŒä¸€æ¡æ–œçº¿ä¸Šã€‘è¦æ±‚ï¼Œè¿™é¢˜å…¶å®žåªæ˜¯å•çº¯çš„å…¨æŽ’åˆ—é—®é¢˜ï¼Œä»£ç å¾ˆå®¹æ˜“äº›å‡ºæ¥
5. ä½†æ˜¯å¯¹äºŽã€ä¸åœ¨åŒä¸€æ¡æ–œçº¿ä¸Šã€‘è¦æ±‚ï¼Œå…¨æŽ’åˆ—å¾—åˆ°çš„`res`ç»“æžœæœ‰äº›å¹¶ä¸èƒ½ç”¨ï¼Œæ¯”å¦‚è¯´çš‡åŽçš„åˆ—ä½ç½®ä¸èƒ½è¿™æ ·æŽ’åˆ—ï¼š[0,1,2,3...,n-1]
6. æ‰€ä»¥çŽ°åœ¨é—®é¢˜å˜æˆäº†ï¼Œåœ¨å…¨æŽ’åˆ—çš„åŸºç¡€ä¸Šï¼Œæ ¹æ® N çš‡åŽçš„é—®é¢˜ï¼ŒåŽ»é™¤ä¸€äº›ç»“æžœ
7. ä¸‹é¢å¼€å§‹å£°æ˜Žä¸€äº›å˜é‡

   - `arr` n ä¸ªçš‡åŽçš„åˆ—ä½ç½®
   - `res` n çš‡åŽæŽ’åˆ—ç»“æžœ
   - `ruler` è®°å½•å¯¹åº”çš„åˆ—ä½ç½®æ˜¯å¦å·²ç»å ç”¨ï¼ˆä¹Ÿæ˜¯æ˜¯å¦æœ‰çš‡åŽï¼‰ï¼Œå¦‚æžœæœ‰ï¼Œé‚£ä¹ˆè®¾ä¸º 1ï¼Œæ²¡æœ‰è®¾ä¸º 0
   - `setPos` å“ˆå¸Œé›†åˆï¼Œæ ‡è®°æ­£æ–œçº¿ï¼ˆä»Žå·¦ä¸Šåˆ°å³ä¸‹ï¼‰ä½ç½®ï¼Œå¦‚æžœåœ¨ç›¸åŒæ­£æ–œçº¿ä¸Šï¼Œåæ ‡(x,y)æ»¡è¶³ y-x éƒ½ç›¸åŒ
   - `setCon` å“ˆå¸Œé›†åˆï¼Œæ ‡è®°åæ­£æ–œçº¿ï¼ˆä»Ž y å³ä¸Šåˆ°å·¦ä¸‹ï¼‰ä½ç½®ï¼Œå¦‚æžœåœ¨ç›¸åŒåæ–œçº¿ä¸Šï¼Œåæ ‡(x,y)æ»¡è¶³ x+y éƒ½ç›¸åŒ

     8. å¤§è‡´çš„ä»£ç æ€è·¯å¦‚ä¸‹æ‰€ç¤º

```markdown
arr = [0,1,2,3,...,n-1]
res = []
ruler = [n]
setPos = new Set()
setPos = new Set()

backtrack(è·¯å¾„, arr):
if æ»¡è¶³ç»“æŸæ¡ä»¶:
result.add(è·¯å¾„)
return
for é€‰æ‹© in é€‰æ‹©åˆ—è¡¨(arr):
åšé€‰æ‹©
backtrack(è·¯å¾„, arr)
æ’¤é”€é€‰æ‹©
return res.length
```

#### ä¸€äº›è§£é‡Š

é¦–å…ˆï¼ŒN ä¸ªçš‡åŽè‚¯å®šå¾—åœ¨ä¸åŒè¡Œï¼Œä¸åŒåˆ—å¤„ï¼ˆç”±é¢˜æ„ â€œä»»ä½•ä¸¤ä¸ªçš‡åŽä¸åŒè¡Œï¼Œä¸åŒåˆ—â€ å¯çŸ¥ï¼‰ã€‚

è¦å®žçŽ°è¿™ä¸ªæ–¹æ¡ˆï¼Œå…¶å®žæ€è·¯å’Œ `BM55 å…¨æŽ’åˆ—`ä¸€æ ·ã€‚æŠŠ N ä¸ªçš‡åŽçš„åˆ—åæ ‡å®šä¹‰æˆæ•°ç»„`arr = [0,1,2,...,n-1]`ã€‚ç„¶åŽå…¨æŽ’åˆ—è¯¥æ•°ç»„å³å¯ï¼Œå¾—åˆ°çš„æŽ’åˆ—æ–¹å¼`res`çš„é•¿åº¦ï¼Œå°±æ˜¯æŽ’åˆ—æ–¹æ¡ˆçš„æ€»æ•°ã€‚

ä½†æ˜¯ N çš‡åŽé—®é¢˜ï¼Œè¿˜éœ€è¦æ»¡è¶³ N çš‡åŽä¸åœ¨åŒä¸€æ¡æ–œçº¿ä¸Šã€‚è¿™å°±æ›´å¤æ‚äº†ä¸€ç‚¹ï¼Œéœ€è¦å¯¹æ–œçº¿ä½ç½®è¿›è¡Œåˆ¤æ–­ã€‚

æ€Žä¹ˆåˆ¤æ–­å‘¢ï¼Ÿ

å¦‚æžœ`setPos`é‡Œä¸åŒ…å«æ­£æ–œçº¿ä½ç½®ï¼Œ`setCon`é‡Œä¸åŒ…å«åæ–œçº¿ä½ç½®ï¼Œé‚£ä¹ˆå°±æ˜¯æˆ‘ä»¬è¦çš„ã€æ»¡è¶³ç»“æŸæ¡ä»¶ã€‘ã€‚

åœ¨å›žæº¯å‡½æ•°é‡Œï¼Œæˆ‘ä»¬å…ˆç¡®å®šç¬¬ 0 æŽ’çš‡åŽçš„åˆ—ä½ç½®ï¼Œç„¶åŽå›žæº¯é€’å½’ï¼Œç¡®å®šç¬¬ 1 æŽ’çš„çš‡åŽçš„åˆ—ä½ç½®ã€‚

æ‰€ä»¥æ¯æ¬¡å›žæº¯ï¼Œåæ ‡`(x,y)`å…¶å®žæ˜¯`(row,i)`

#### æœ€ç»ˆçš„ä»£ç 

```javascript
const arr = Array.from({ length: n }, (item, index) => index); // åˆ—çš„ä½ç½®
let res = [];
let ruler = new Array(n).fill(0); //ç”¨æ¥è®°å½•numçš„çš‡åŽä¸‹è½åŽï¼Œå¯¹è§’çº¿ä½ç½®ï¼Œå¦‚æžœåœ¨å¯¹è§’çº¿ä½ç½®ï¼Œé‚£ä¹ˆä¸º1ï¼Œå¦åˆ™0
let setPos = new Set(); //æ ‡è®°æ­£å¯¹è§’çº¿
let setCon = new Set(); // æ ‡è®°åå¯¹è§’çº¿

const backTrace = (row, path) => {
  if (path.length === n) {
    res.push(path.slice());
    return;
  }
  for (let i = 0; i < n; i++) {
    // iè¡¨ç¤ºåˆ—
    if (ruler[i] == 0 && !setPos.has(i - row) && !setCon.has(i + row)) {
      path.push(arr[i]);
      ruler[i] = 1;
      setPos.add(i - row);
      setCon.add(i + row);
      backTrace(row + 1, path);
      path.pop();
      ruler[i] = 0;
      setPos.delete(i - row);
      setCon.delete(i + row);
    }
  }
};
backTrace(0, []);
return res.length;
```
